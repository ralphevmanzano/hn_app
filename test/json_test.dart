import 'package:flutter_test/flutter_test.dart';
import 'package:hn_app/json_parsing.dart';

void main() {
  test("parses topstories.json", () {
    const jsonString =
        "[ 21626677, 21626540, 21625160, 21625974, 21626047, 21626163, 21625912, 21617816, 21622830, 21611788, 21624625, 21623599, 21624742, 21625901, 21614561, 21623721, 21603934, 21626022, 21623364, 21624656, 21593216, 21625805, 21626025, 21624284, 21623522, 21609859, 21613982, 21623534, 21625660, 21618134, 21625984, 21624739, 21617848, 21623516, 21624031, 21623052, 21625329, 21625667, 21626414, 21604246, 21620300, 21611677, 21625061, 21589508, 21613415, 21612400, 21625592, 21626478, 21624258, 21622217, 21615415, 21624316, 21618079, 21613357, 21621679, 21619710, 21622322, 21621329, 21618346, 21623942, 21614007, 21617016, 21624984, 21618373, 21626321, 21609196, 21606487, 21620687, 21623319, 21621530, 21623325, 21617643, 21593158, 21624864, 21615978, 21620613, 21618774, 21589647, 21623644, 21612151, 21610687, 21619982, 21619895, 21615924, 21617368, 21624516, 21594793, 21603986, 21603920, 21612488, 21607818, 21610981, 21611565, 21605419, 21619098, 21604850, 21612981, 21616933, 21614741, 21620521, 21618115, 21616084, 21604136, 21616149, 21609852, 21593147, 21613997, 21618083, 21622658, 21609660, 21620844, 21604449, 21598665, 21621067, 21593675, 21606415, 21609834, 21624859, 21614851, 21604890, 21604627, 21615393, 21616463, 21604825, 21618654, 21611551, 21616269, 21610207, 21605160, 21604283, 21619542, 21613811, 21610071, 21589670, 21612087, 21604544, 21609030, 21611379, 21596907, 21606221, 21616469, 21605037, 21608094, 21614533, 21593446, 21615526, 21622912, 21619884, 21615975, 21613647, 21599114, 21605077, 21598127, 21599546, 21614629, 21592970, 21610505, 21608429, 21614714, 21609714, 21604618, 21597389, 21624907, 21616518, 21597763, 21605643, 21611891, 21614708, 21604343, 21600101, 21624269, 21610433, 21605165, 21615164, 21616179, 21598815, 21609403, 21593307, 21617836, 21613098, 21609807, 21610711, 21593667, 21604710, 21608320, 21614063, 21592822, 21599545, 21593480, 21613561, 21609623, 21593185, 21615633, 21611720, 21624508, 21595948, 21612106, 21614660, 21618521, 21622262, 21607734, 21609889, 21622138, 21610496, 21588893, 21602113, 21611623, 21598085, 21588663, 21591002, 21607428, 21609185, 21618899, 21596792, 21605145, 21588101, 21605418, 21594436, 21611769, 21625466, 21614232, 21609909, 21617259, 21619421, 21617758, 21610085, 21593806, 21625377, 21602068, 21593498, 21609655, 21609767, 21618039, 21605470, 21590710, 21614240, 21623150, 21604685, 21604566, 21611120, 21601505, 21609572, 21615426, 21596965, 21603483, 21595758, 21605719, 21602121, 21602437, 21607712, 21606416, 21610325, 21613669, 21624861, 21604360, 21595512, 21614490, 21590688, 21618223, 21598034, 21619940, 21598154, 21605391, 21601771, 21602056, 21600267, 21615669, 21601055, 21605735, 21620432, 21591950, 21622773, 21590454, 21618197, 21604006, 21610077, 21620744, 21590317, 21617397, 21599530, 21614759, 21609386, 21593257, 21604552, 21589987, 21594130, 21589286, 21591206, 21597585, 21610532, 21605190, 21613684, 21594596, 21594250, 21595091, 21619661, 21589719, 21601996, 21608818, 21596003, 21587774, 21602119, 21609897, 21604987, 21587944, 21611995, 21590842, 21599187, 21601763, 21610904, 21610136, 21587601, 21601482, 21587935, 21615159, 21589084, 21601774, 21594402, 21615098, 21591441, 21619867, 21623611, 21596302, 21598526, 21606329, 21597169, 21619671, 21617138, 21598372, 21590094, 21595493, 21599089, 21613988, 21596273, 21609865, 21609425, 21598651, 21592854, 21618068, 21619345, 21608662, 21608507, 21622748, 21595577, 21613623, 21589531, 21595083, 21611347, 21588259, 21615374, 21593482, 21617515, 21613122, 21613083, 21614274, 21607564, 21600346, 21593669, 21590970, 21604512, 21592337, 21588100, 21598404, 21597506, 21608231, 21614241, 21592794, 21607300, 21612368, 21595672, 21607141, 21600466, 21604451, 21617782, 21609214, 21619277, 21617594, 21608805, 21614506, 21611389, 21613295, 21587918, 21610538, 21589204, 21617937, 21597053, 21616381, 21589213, 21615413, 21600827, 21610469, 21610396, 21598008, 21592368, 21610213, 21617723, 21609997, 21609963, 21611241, 21589205, 21623918, 21617527, 21609140, 21592297, 21590810, 21608715, 21603165, 21617164, 21608395, 21597684, 21608288, 21599808, 21596395, 21601932, 21601695, 21607319, 21606651, 21606136, 21622209, 21604020, 21597832, 21601247, 21622082, 21587572, 21622386, 21600226, 21604692, 21604322, 21620938, 21597623, 21609452, 21609191, 21599496, 21596953, 21610684, 21590743, 21610033, 21590586, 21609912, 21603536, 21607059, 21609168, 21617333, 21606109, 21598741, 21600428, 21598371, 21616890, 21601600, 21610243, 21613364, 21590271, 21599647, 21610965, 21616377, 21616371, 21600948, 21614676, 21613707, 21591115, 21615966, 21612452, 21602270, 21599573, 21604170, 21600773, 21612271, 21612172, 21613329, 21613325, 21593779, 21612556, 21617019, 21594985, 21598866, 21609056, 21588174, 21598675, 21587988, 21587731, 21594825, 21587624, 21587621, 21611213, 21618262, 21614498, 21610937, 21606884, 21610792, 21605115, 21612658, 21610350, 21597081, 21605711, 21601736, 21594617, 21594547, 21587767, 21611839, 21599446 ]";

    expect(parseTopStories(jsonString).first, 21626677);
  });

  test("parses topstories.json", () {
    const jsonString = """{"by":"dhouston","descendants":71,"id":8863,"kids":[9224,8917,8952,8884,8887,8869,8958,8940,8908,9005,8873,9671,9067,9055,8865,8881,8872,8955,10403,8903,8928,9125,8998,8901,8902,8907,8894,8870,8878,8980,8934,8943,8876],"score":104,"time":1175714200,"title":"My YC app: Dropbox - Throw away your USB drive","type":"story","url":"http://www.getdropbox.com/u/2/screencast.html"}""";

    expect(parseArticle(jsonString).by, "dhouston");
  });
}
